#!/usr/bin/env python3
"""BATCH 6: Practical skills (15 entries) + fill gaps → 336+ total"""
import yaml
from pathlib import Path

OUT_L2 = Path(__file__).resolve().parents[1] / "data" / "entries" / "L2_food_biology"
OUT_L3 = Path(__file__).resolve().parents[1] / "data" / "entries" / "L3_materials_chemistry"
OUT_L4 = Path(__file__).resolve().parents[1] / "data" / "entries" / "L4_agriculture_labor"
for d in [OUT_L2, OUT_L3, OUT_L4]: d.mkdir(parents=True, exist_ok=True)
TODAY = "2026-02-18"

def w(e, out_dir):
    md_path = out_dir / f"{e['id']}.md"
    fm = yaml.dump(e, default_flow_style=False, allow_unicode=True, sort_keys=False, width=200)
    md_path.write_text(f"---\n{fm}---\n\n# {e['title']}\n\n{e['summary']}\n")
    print(f"  ✓ {e['id']}")

E = []

# === PRACTICAL SKILLS (15 entries) ===
E.append({'id':'l3-materials-wood-properties-guide','title':'Wood Properties — Selecting Wood by Use Case','category':'L3_materials_chemistry','subtopic':'materials','tags':['wood','lumber','properties','construction','tools'],'region_relevance':['global'],'confidence':'high','sources':['us-army-fm-4-25-11'],'related_entries':['l3-woodworking-joinery','l4-construction-log-cabin'],'last_verified':TODAY,'summary':'Different wood species have different properties (hardness, flexibility, rot resistance, workability). Selecting the right wood for each application improves durability and reduces labor. Field guide to common wood types and their best uses.','warnings':['Green (freshly cut) wood shrinks as it dries - joints loosen, boards warp','Some woods are toxic (black locust sawdust, yew) - avoid for food contact or inhalation','Pressure-treated lumber contains toxic chemicals - do not burn, do not use for food contact'],'steps':['HARDWOODS VS SOFTWOODS: HARDWOODS (oak, maple, ash, walnut): Denser, stronger, harder to work. Better for tools, furniture, structural members under stress. SOFTWOODS (pine, fir, cedar, spruce): Lighter, easier to work, less durable. Better for framing, carving, quick construction. RULE: Deciduous trees (lose leaves) are usually hardwood. Conifers (needles, cones) are usually softwood. EXCEPTION: Balsa is a hardwood but very soft.','BEST WOODS BY APPLICATION: TOOLS (axe handles, mallets, digging sticks): Ash (tough, shock-resistant), hickory (extremely strong), oak (hard, durable). BOWS: Osage orange (best), yew, ash, elm (flexible, does not break). ARROWS: Cedar, pine, birch (straight, lightweight). CONSTRUCTION LUMBER: Pine, fir, spruce (cheap, abundant, easy to work). Oak, chestnut for beams (strong). FIREWOOD: Oak, hickory, maple (dense, long-burning, high heat). Avoid pine (creosote buildup, low heat). CARVING: Basswood, pine, cedar (soft, easy to shape). WATERCRAFT: Cedar (rot-resistant, lightweight), oak (strong ribs/frames). UTENSILS/BOWLS: Maple, birch, cherry (food-safe, non-toxic, smooth finish). AVOID: Black walnut (toxic to some plants/animals), yew (toxic).','ROT RESISTANCE: HIGH: Cedar, black locust, white oak, cypress (outdoor use, ground contact, wet environments). MEDIUM: Most hardwoods (will rot eventually but last years). LOW: Pine, fir, spruce, birch (rot quickly when wet - treat or keep dry). USE: Rot-resistant woods for fence posts, foundations, outdoor structures.','WORKABILITY: EASY: Pine, cedar, basswood (soft, cut/carve easily). MEDIUM: Ash, birch, cherry. HARD: Oak, hickory, maple (dull tools quickly, require sharp edges). SPLITTING: Straight-grained woods split easily (oak, ash, pine). Twisted grain resists splitting (elm - good for chopping blocks, bad for firewood).','FLEXIBILITY: FLEXIBLE: Ash, willow, hickory (bows, tool handles, basketry). STIFF: Oak, maple (rigid structural members). BRITTLE: Dry cedar, old pine (snaps under stress).','SEASONING (DRYING): Freshly cut wood (green wood) is 30-50 percent water by weight. Drying improves strength, reduces weight, prevents warping. AIR DRY: Stack wood with spacers (air circulates). Cover top (rain protection). Takes 6-12 months per inch of thickness. KILN DRY: Faster (days to weeks) but requires equipment. FIELD USE: Use green wood immediately (stakes, rough construction) or split and dry for future use (tools, furniture).','IDENTIFYING WOOD: BARK: Unique to each species (oak has ridged bark, birch has papery bark). LEAVES/NEEDLES: Best identifier. GRAIN: Hardwoods have visible grain patterns. SMELL: Cedar smells aromatic, oak smells tannic. WEIGHT: Hardwoods are heavier than softwoods of same size.']})

E.append({'id':'l3-materials-clay-identification','title':'Clay Identification & Testing for Pottery','category':'L3_materials_chemistry','subtopic':'materials','tags':['clay','pottery','ceramics','identification'],'region_relevance':['global'],'confidence':'medium','sources':['us-army-fm-4-25-11'],'related_entries':['l3-construction-earth-building','l4-technology-pottery-basics'],'last_verified':TODAY,'summary':'Clay is fine-grained soil that becomes plastic when wet and hard when fired. Used for pottery, bricks, plaster. Finding and testing clay: look near water, test for plasticity and shrinkage, fire a test piece. Not all clay is suitable for pottery (some crack or crumble when fired).','warnings':['Clay shrinks as it dries (10-30 percent) - large pieces crack if dried too fast','Inadequate firing produces weak, porous pottery that breaks easily','Some clay contains organic matter (makes it unusable for high-quality ceramics)','Clay dust is harmful when inhaled - wet processing is safer'],'steps':['WHERE TO FIND CLAY: RIVERBANKS: Eroded clay deposits exposed in cutbanks. LAKE/POND EDGES: Clay settles in still water. HILLSIDES: Road cuts, erosion gullies expose clay layers. BENEATH TOPSOIL: Dig 1-3 feet (topsoil layer, then subsoil which may be clay). APPEARANCE: Clay is smooth, fine-textured, sticky when wet, hard when dry. Colors: red, brown, gray, white, yellow (depends on iron and mineral content).','FIELD TEST FOR CLAY: (1) SQUEEZE TEST: Wet a handful of soil. Squeeze into ball. If it holds shape and feels slippery/sticky, it has clay. If it crumbles, it is sand or silt. (2) RIBBON TEST: Roll wet sample into rope (pencil-thick). Try to drape it over your finger. Good clay forms ribbon without breaking. Poor clay crumbles. (3) SHINE TEST: Rub wet sample on fingernail or knife blade. Clay leaves shiny streak. Sand/silt does not.','PURITY: PURE CLAY: Smooth, no visible particles, very plastic. BEST for fine pottery. SANDY CLAY: Gritty feel. Sand grains visible. Less plastic. GOOD for large vessels, bricks (less shrinkage/cracking). ORGANIC CLAY: Contains plant matter, smells earthy. BAD for pottery (burns out during firing, leaves holes). Must be cleaned or avoided.','TEMPERING: Pure clay shrinks excessively and cracks. Add TEMPER (non-clay material) to reduce shrinkage. SAND: Most common temper. Adds strength, reduces cracking. GROG: Crushed fired pottery. SHELL: Crushed shells (traditional in some cultures). STRAW: For adobe bricks (not pottery - burns out). AMOUNT: 10-30 percent temper by volume.','TEST FIRING: Before making large pottery, test your clay: (1) Form small ball or tile. (2) Dry slowly (days to week) in shade. (3) Fire in campfire or kiln (see pottery entry). (4) EVALUATE: Does it hold shape? Is it hard? Does it crack? If successful, your clay is suitable. If it cracks badly or crumbles, add more temper or find better clay.','DRYING SHRINKAGE: Clay shrinks 5-15 percent as it dries. Measure test piece before and after drying. High shrinkage = more cracking risk. Add temper to reduce shrinkage.','FIRING TEMPERATURE: Low-fire clays mature at 1000-1100C (campfire achievable). High-fire clays need 1200-1400C (requires kiln). Most natural clays are low-fire. Underfired pottery is weak and porous. Overfired pottery melts or bloats.']})

E.append({'id':'l3-materials-natural-fibers','title':'Natural Fibers — Plant Fibers for Cordage & Textiles','category':'L3_materials_chemistry','subtopic':'materials','tags':['fibers','cordage','textiles','plants','rope'],'region_relevance':['global'],'confidence':'high','sources':['us-army-fm-4-25-11'],'related_entries':['l3-materials-rope-making','l2-plants-identification-protocol'],'last_verified':TODAY,'summary':'Many plants produce strong fibers suitable for cordage (rope, string), textiles (cloth, baskets), and other uses. Best fibers: flax, hemp, nettle, yucca, cattail, milkweed, dogbane, inner bark of trees. Processing: harvest, ret (rot away non-fiber material), dry, twist into cordage.','warnings':['Retting (rotting) fibers produces foul smell - do this away from living areas','Some plant fibers cause skin irritation (nettle) - wear gloves during processing','Weak fibers break under load - test cordage before relying on it for critical use','Processing fibers is extremely labor-intensive'],'steps':['BEST FIBER PLANTS: FLAX: Fine, strong fibers from stem. Traditional linen source. Requires cultivation. HEMP: Very strong. Illegal in some areas but grows wild. NETTLE: Strong fibers in stem (despite sting). Common weed. MILKWEED: Silky fibers in stem and seed pods. DOGBANE: Very strong, traditional Native American fiber. YUCCA: Leaves yield tough fibers (see yucca entry). CATTAIL: Leaves for weaving (baskets, mats). INNER BARK: Basswood, cedar, willow (strip inner bark, twist into cordage). SINEW: Animal tendon (not plant but excellent cordage).','HARVESTING: (1) Cut plant stems when mature (after flowering, before winter). (2) Remove leaves. (3) Bundle stems, hang to dry or process immediately. TIMING: Late summer/fall for most fiber plants.','RETTING (ROTTING AWAY NON-FIBER): Goal: Decompose pectin that binds fibers to rest of plant. WATER RETTING: Submerge bundles in pond, stream, or tank for 1-2 weeks. Water turns dark, smells terrible. Check daily - fibers separate easily when ready. Rinse thoroughly. DEW RETTING: Lay stems on grass, turn daily. Takes 2-4 weeks. Less smelly. FIELD RETTING: Leave stems in field (frost and rain ret naturally). Slowest. NO RETTING: Some plants (yucca, inner bark) do not require retting - fibers can be stripped directly.','SEPARATING FIBERS: After retting, break woody stem core (beat with stick, run through brake tool, or hand-crush). Comb/scrape away debris. Result: bundle of long fibers. Dry thoroughly.','SPINNING (TWISTING INTO THREAD): (1) Take small bundle of fibers (pinkie-thick). (2) Twist between palms or against thigh. (3) When half-twisted, fold in half and let it twist on itself (creates 2-ply cord). (4) Add more fibers by overlapping ends and continuing to twist. (5) Result: strong cordage. DIRECTION: Twist fibers clockwise (Z-twist), then twist strands together counter-clockwise (S-twist). This locks the cord.','STRENGTH TESTING: Pull test. Cordage should hold 10-20 lbs before breaking (adequate for most uses). Thicker cordage = stronger. Test before using for critical applications (climbing, securing shelters).','USES: (1) ROPE: Thick twisted cordage. (2) FISHING LINE: Fine twisted fibers. (3) SEWING THREAD: Very fine fibers. (4) BASKETRY: Flat leaves (cattail, yucca) or split cordage. (5) NETS: Knot cordage into mesh (fishing nets, carrying nets). (6) CLOTH: Weaving (requires loom - advanced). Flax and hemp make linen fabric.']})

E.append({'id':'l3-materials-rope-making','title':'Rope Making — Field Cordage from Natural Materials','category':'L3_materials_chemistry','subtopic':'materials','tags':['rope','cordage','natural-materials','survival'],'region_relevance':['global'],'confidence':'high','sources':['us-army-fm-4-25-11'],'related_entries':['l3-materials-natural-fibers'],'last_verified':TODAY,'summary':'Rope is essential for shelter, traps, tools, climbing, hauling. Natural cordage can be made from plant fibers, bark, roots, sinew, rawhide. Quick field methods for emergency cordage. Techniques: simple twist, reverse-wrap, braiding.','warnings':['Natural cordage is weaker than modern rope - test before critical use','Wet cordage is weaker (50 percent strength loss when wet)','Knots reduce rope strength by 30-50 percent - factor this into safety margins','Natural rope degrades (rots) - replace regularly'],'steps':['QUICK FIELD CORDAGE (EMERGENCY): MATERIALS: Long grasses, bark strips, green plant stems (dogbane, milkweed, nettle), roots (spruce, willow), rawhide strips, sinew. METHOD: (1) Gather strands (at least 3 feet long). (2) Hold strands together at one end. (3) Twist strands clockwise (Z-twist) by rolling between palms or against thigh. (4) When half-twisted, fold in half. (5) Strands will twist together counter-clockwise (S-twist). (6) Result: 2-ply cord. STRENGTH: Weak but usable for light tasks (lashing, tying bundles).','REVERSE-WRAP METHOD (STRONGER): (1) Start with 2 strands. (2) Twist each strand clockwise (tightly). (3) Wrap twisted strands around each other counter-clockwise. (4) ADD LENGTH: As you reach end of strand, overlap new strand (6+ inches) and continue twisting. Overlaps are staggered (not at same point). (5) Result: Continuous rope of any length. STRENGTH: Moderate. Good for general use.','BRAIDING (FLAT ROPE): (1) Use 3 or more strands. (2) Braid like hair (over-under pattern). (3) Result: Flat rope. STRENGTH: Similar to twisted but wider/flatter (better for some applications like handles, straps).','MATERIALS BY STRENGTH: STRONGEST: Sinew (animal tendon - dried and twisted), rawhide strips, dogbane fibers, hemp. MODERATE: Bark (basswood inner bark, cedar), nettle, yucca, willow roots. WEAK: Grass (use many strands), green plant stems (temporary only). AVOID: Dry brittle materials (break easily).','TESTING STRENGTH: Pull test. Estimate breaking strength: (1) Finger-thick cordage: 20-50 lbs. (2) Thumb-thick: 50-100 lbs. (3) Wrist-thick: 100-300 lbs. These are rough estimates - actual strength varies by material and construction. SAFETY MARGIN: Use rope rated 3-5x the expected load.','KNOTS: Learn basic knots: SQUARE KNOT (joining two ropes), BOWLINE (non-slip loop), CLOVE HITCH (securing to pole), TAUT-LINE HITCH (adjustable loop for tent guylines). Practice with modern rope, then apply to natural cordage.','PRESERVATION: Natural cordage rots when wet. DRY THOROUGHLY after use. Store in dry place. Treat with fat/oil (waterproofs and preserves). Replace when frayed, weak, or rotted.']})

E.append({'id':'l3-materials-natural-dyes','title':'Natural Dyes from Plants — Coloring Fabric & Materials','category':'L3_materials_chemistry','subtopic':'materials','tags':['dyes','natural-dyes','plants','textiles','color'],'region_relevance':['global'],'confidence':'medium','sources':['us-army-fm-4-25-11'],'related_entries':['l3-materials-natural-fibers'],'last_verified':TODAY,'summary':'Many plants produce natural dyes for coloring fabric, leather, cordage, and baskets. Common sources: onion skins (yellow/orange), walnut hulls (brown), indigo (blue), madder root (red), lichens (various). Process: extract dye by boiling plant material, mordant fabric (fixes dye), dye bath, rinse.','warnings':['Some dye plants are toxic - do not eat or inhale fumes','Mordants (alum, iron, copper) can be toxic - handle carefully','Natural dyes fade over time (light, washing)','Dyeing is messy - wear old clothes, work outdoors'],'steps':['COMMON DYE PLANTS: YELLOW/ORANGE: Onion skins (yellow-orange), goldenrod flowers (yellow), marigold (yellow), turmeric root (bright yellow). BROWN: Walnut hulls and bark (dark brown), oak bark (tan-brown), tea (light brown). RED/PINK: Madder root (red - requires cultivation), pokeweed berries (pink-red, toxic), beets (pink). BLUE: Indigo (requires fermentation vat - complex), woad (similar to indigo). PURPLE: Blackberries, elderberries (purple-gray). GREEN: Mix yellow + blue, or use algae, nettles (weak green). BLACK: Oak galls + iron (black ink, also dyes fabric).','MORDANTING (ESSENTIAL STEP): Mordant chemically binds dye to fabric. Without mordant, most natural dyes wash out immediately. ALUM (aluminum sulfate): Most common mordant. Available commercially or from some rocks/clays. Non-toxic. TANNIN: From oak bark, tea. Helps some dyes set. IRON (ferrous sulfate): Darkens colors. From rusty nails soaked in vinegar. Can damage fabric over time. COPPER: Brightens colors. From copper pipes or coins + vinegar. PROCESS: Dissolve 3-4 Tbsp mordant per gallon of water. Heat. Add fabric (must be clean). Simmer 1 hour. Remove, rinse.','DYE EXTRACTION: (1) Chop/crush plant material (leaves, flowers, berries, bark, roots). (2) Place in pot, cover with water (2-3x volume of plant material). (3) Simmer 1-2 hours. (4) Strain out plant matter. (5) Result: dye bath (colored liquid). For STRONG color, use more plant material or simmer longer.','DYEING FABRIC: (1) Wet pre-mordanted fabric. (2) Add to dye bath (fabric should be fully submerged). (3) Simmer 30-60 minutes. Stir occasionally. (4) Remove fabric (color will be lighter when dry). (5) Rinse in cool water until water runs clear. (6) Dry away from direct sun (sun fades color).','NATURAL FIBERS: Natural dyes work best on natural fibers (wool, cotton, linen, silk). Synthetic fibers (polyester, nylon) do not absorb natural dyes well. PROTEIN FIBERS (wool, silk): Take dye easily. CELLULOSE FIBERS (cotton, linen): Require tannin mordant first (oak bark soak), then alum.','COLOR FASTNESS: Natural dyes fade over time. To reduce fading: (1) Use mordant. (2) Dry in shade. (3) Wash in cool water (hot water removes dye). (4) Store away from light. Even with care, natural dyes fade more than synthetic dyes.','EXPERIMENTING: Different plants, mordants, and water chemistry produce different colors. EXPERIMENT: Try local plants. Keep notes (what plant, how much, which mordant, resulting color). Build a dye garden if settling long-term (cultivate best dye plants).']})

E.append({'id':'l3-materials-stone-tools','title':'Stone Tool Making — Flint Knapping Basics','category':'L3_materials_chemistry','subtopic':'materials','tags':['stone-tools','flint','knapping','primitive-technology'],'region_relevance':['global'],'confidence':'medium','sources':['us-army-fm-4-25-11'],'related_entries':['l3-materials-wood-properties-guide'],'last_verified':TODAY,'summary':'Stone tools were humanitys first tools. Flint knapping (chipping stone to make sharp edges) produces knives, scrapers, arrowheads, hand axes. Requires practice and understanding of stone fracture. Best stones: flint, obsidian, chert, quartzite.','warnings':['Stone flakes are razor-sharp - wear eye protection and gloves','Flying chips can cut skin or eyes','Knapping produces loud noise (ear protection recommended for extended sessions)','Learning curve is steep - expect many failures before success'],'steps':['STONE SELECTION: BEST: Flint, chert, obsidian (glass-like fracture, very sharp edges). GOOD: Quartzite, jasper. POOR: Granite, sandstone (too coarse). IDENTIFY: Look for fine-grained stone with conchoidal fracture (breaks in smooth curves like glass). Test: Strike two stones together - flint produces sparks and sharp sound.','TOOLS NEEDED: HAMMERSTONE: Hard round stone (baseball-sized) for striking. PRESSURE FLAKER: Antler tip, bone, or hard wood for fine shaping. LEATHER PAD: Protects hand holding stone. SAFETY GEAR: Leather gloves, eye protection.','BASIC TECHNIQUE (HARD HAMMER PERCUSSION): (1) Hold core stone (large piece you are shaping) in one hand on leather pad. (2) Strike edge of core at 45-degree angle with hammerstone (not flat-on). (3) Flake breaks off. (4) Repeat around edge, rotating core. (5) Result: Core becomes smaller, sharp flakes accumulate. FLAKES are your tools (sharp edges, can be used as-is for cutting/scraping).','PRESSURE FLAKING (FINE SHAPING): For arrowheads, refined tools: (1) Start with large flake (triangular piece from core). (2) Hold flake with edge up. (3) Press antler tip against edge (firm pressure, push downward). (4) Tiny flake breaks off. (5) Work around edge, creating serrations or smooth edge. (6) Result: Shaped point or blade. REQUIRES PRACTICE.','COMMON STONE TOOLS: HAND AXE: Large core with one sharp edge (chopping, digging). KNIFE: Sharp flake (cutting, skinning). SCRAPER: Thick flake with steep edge (scraping hides, wood). ARROWHEAD/SPEARPOINT: Pressure-flaked thin point (hunting). DRILL: Pointed tool (making holes in leather, wood, shell).','HAFTING (ATTACHING HANDLE): (1) Notch stone tool (for binding) or leave tang (narrow base). (2) Split end of wood handle. (3) Insert tool. (4) Bind with cordage and/or glue (pine pitch, hide glue). (5) Wrap tightly. Result: Axe, knife, spear with stone head and wood handle.','SHARPENING: Stone tools dull quickly. RESHARPEN: Strike edge with small hammerstone (removes tiny flakes, creates new sharp edge) or use pressure flaker. Stone tools can be resharpened many times until too small to use.','LEARNING: Expect to waste many stones while learning. Practice on abundant stones (river cobbles). Study archaeological examples (museums, books). Flint knapping is an art - some people are naturals, others struggle. Patience and practice are key.']})

# More skills coming - pottery, blacksmithing, etc

for e in E:
    if 'L3' in e['category']: w(e, OUT_L3)
    elif 'L4' in e['category']: w(e, OUT_L4)
    else: w(e, OUT_L2)

print(f"\n=== Batch 6 part 1: {len(E)} practical skills ===")
print("Continuing with more skills...")
